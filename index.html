<!DOCTYPE html>
<html>
<head>
<link rel="icon" href="https://github.com/olearyf/wind-tunnel-simulator/blob/master/wind.png?raw=true">
  <title>Wind Tunnel Simulator</title>

  <link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>

<center><h1>
  Wind Tunnel Simulator
</h1></center>

<center><h3>
  Controls
</h3></center>

<center><p>

  Draw the outline of your object from left to right (or don't if you're feeling adventurous) and see how it affects the flow of 'air' particles.
  
  </p>
  <p>
  <br>
  To reset the environment, click here: 
  <button class="primary-button js-clear-persisted-vector-field">
    Reset
  </button>
</p></center>
<div id="fluid_container"></div>



<script type="text/javascript" src="fluid.js"></script>
<script type="text/javascript">

  // via https://stackoverflow.com/a/18197341/796832
  function download(filename, text) {
    const element = document.createElement('a');
    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
    element.setAttribute('download', filename);

    element.style.display = 'none';
    document.body.appendChild(element);

    element.click();

    document.body.removeChild(element);
  }

  //const downloadVectorFieldButton = document.querySelector('.js-download');
  /*downloadVectorFieldButton.addEventListener('click', () => {
    download('vector-field.json', JSON.stringify(fluid.fetchVectorFieldData()));
  });*/

  //const importVectorFieldButton = document.querySelector('.js-import');
  /*importVectorFieldButton.addEventListener('change', (e) => {
    var file = e.target.files[0];

    var reader = new FileReader();

    // Closure to capture the file information.
    reader.onload = (e) => {
      fluid.persistVectorFieldData(e.target.result);
      fluid.initVectorField();
    }

    reader.readAsText(file);
  });*/

  /*const resetVelocityButton = document.querySelector('.js-reset-velocities');
  resetVelocityButton.addEventListener('click', () => {
    fluid.resetVelocity();
    fluid.persistVectorFieldData();
  });*/

  const clearPersistedVectorFieldButton = document.querySelector('.js-clear-persisted-vector-field');
  clearPersistedVectorFieldButton.addEventListener('click', () => {
    fluid.clearVectorFieldData();
  });

  /*const showVectorFieldCheckbox = document.querySelector('.js-show-vectory-field');
  showVectorFieldCheckbox.addEventListener('change', () => {
    fluid.showVectorField = showVectorFieldCheckbox.matches(':checked');
  });*/

  /*const frameDraggingCheckbox = document.querySelector('.js-frame-dragging-checkbox');
  frameDraggingCheckbox.addEventListener('change', () => {
    fluid.enableFrameDragging = frameDraggingCheckbox.matches(':checked');
  });*/


  const vectorCombMagnitudeInput = 5;
  const vectorCombMagnitudeLabelInput = 5;
  /*const onVectorMagnitudeInputChange = () => {
    vectorCombMagnitudeLabelInput.innerHTML = parseFloat(vectorCombMagnitudeInput.value);
    fluid.vectorCombMagnitude = parseFloat(vectorCombMagnitudeInput.value);
  };
  vectorCombMagnitudeInput.addEventListener('input', onVectorMagnitudeInputChange);
  vectorCombMagnitudeInput.addEventListener('change', onVectorMagnitudeInputChange);*/

  fluid.init();
</script>

</body>
<hr>
<center><p>
  Modified from <a href="https://github.com/MadLittleMods/airflow-fluid-simulator">Airflow Fluid Simulator</a> by MadLittleMods
</p></center>

<center><p>
  Which was based off of <a href="http://neuroid.co.uk/lab/fluid/">Javascript 2D Fluid / Turbulence Sim</a> by Dean Alex
</p></center>

</html>
